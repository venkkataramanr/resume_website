{"version":3,"sources":["../../lib/setApiGatewayAccessLogFormat.js"],"names":["require","API_GATEWAY_LOG_FORMAT","API_GATEWAY_V2_LOG_FORMAT","module","exports","ctx","sls","service","custom","enterprise","collectApiGatewayLogs","provider","logs","restApi","format","JSON","stringify","httpApi"],"mappings":"AAAA;;iBAE8DA,OAAO,CAAC,YAAD,C;MAA7DC,sB,YAAAA,sB;MAAwBC,yB,YAAAA,yB;;AAEhCC,MAAM,CAACC,OAAP,GAAiBC,GAAG,IAAI;AACtB,MACEA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,IACAH,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,UADvB,IAEAJ,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,UAAvB,CAAkCC,qBAAlC,KAA4D,KAH9D,EAIE;AACA;AACD;;AAED,MAAI,CAACL,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAA9B,EAAoC;AAClCP,IAAAA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,GAAgC,EAAhC;AACD;;AACD,MACE,CAACP,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BC,OAA/B,IACA,OAAOR,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BC,OAArC,KAAiD,QAFnD,EAGE;AACAR,IAAAA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BC,OAA9B,GAAwC,EAAxC;AACD;;AACDR,EAAAA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BC,OAA9B,CAAsCC,MAAtC,GAA+CC,IAAI,CAACC,SAAL,CAAef,sBAAf,CAA/C;;AAEA,MACE,CAACI,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BK,OAA/B,IACA,OAAOZ,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BK,OAArC,KAAiD,QAFnD,EAGE;AACAZ,IAAAA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BK,OAA9B,GAAwC,EAAxC;AACD;;AACDZ,EAAAA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,QAAhB,CAAyBC,IAAzB,CAA8BK,OAA9B,CAAsCH,MAAtC,GAA+CC,IAAI,CAACC,SAAL,CAAed,yBAAf,CAA/C;AACD,CA3BD","sourcesContent":["'use strict';\n\nconst { API_GATEWAY_LOG_FORMAT, API_GATEWAY_V2_LOG_FORMAT } = require('./utils.js');\n\nmodule.exports = ctx => {\n  if (\n    ctx.sls.service.custom &&\n    ctx.sls.service.custom.enterprise &&\n    ctx.sls.service.custom.enterprise.collectApiGatewayLogs === false\n  ) {\n    return;\n  }\n\n  if (!ctx.sls.service.provider.logs) {\n    ctx.sls.service.provider.logs = {};\n  }\n  if (\n    !ctx.sls.service.provider.logs.restApi ||\n    typeof ctx.sls.service.provider.logs.restApi !== 'object'\n  ) {\n    ctx.sls.service.provider.logs.restApi = {};\n  }\n  ctx.sls.service.provider.logs.restApi.format = JSON.stringify(API_GATEWAY_LOG_FORMAT);\n\n  if (\n    !ctx.sls.service.provider.logs.httpApi ||\n    typeof ctx.sls.service.provider.logs.httpApi !== 'object'\n  ) {\n    ctx.sls.service.provider.logs.httpApi = {};\n  }\n  ctx.sls.service.provider.logs.httpApi.format = JSON.stringify(API_GATEWAY_V2_LOG_FORMAT);\n};\n"],"file":"setApiGatewayAccessLogFormat.js"}